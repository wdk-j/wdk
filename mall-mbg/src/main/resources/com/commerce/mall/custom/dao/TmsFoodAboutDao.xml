<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.commerce.mall.custom.dao.TmsFoodAboutDao">
    <sql id="Base_Column_List">
        food_id, food_name, price, mark, discount, main_materials, has_meat, weight, intro,
        packing_fee, seller_id, is_delete
    </sql>
    <select id="selectSales" resultType="java.lang.Integer">
        select IFNULL((select sum(tod.amount)
                       from tms_order o
                                left join tms_order_detail tod on o.order_id = tod.od_id
                       where tod.food_id = #{foodId}
                         and date_format(post_time, '%Y-%m-%d') &gt;=
                             date_format(DATE_SUB(curdate(), INTERVAL 1 MONTH), '%Y-%m-%d')), 0) as sales
    </select>
</mapper>